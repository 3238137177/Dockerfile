image: webdevops/dockerfile-build-env
stages:
    - build-env
    - level0
    - level1
    - level2
    - level3
    - level4
    - level5
'bootstrap:alpine':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/bootstrap/alpine'
        - 'docker build --no-cache -t webdevops/bootstrap:alpine .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/bootstrap:alpine --config bootstrap/test.yaml --config bootstrap/alpine/test.yaml'
        - 'docker push webdevops/bootstrap:alpine'
    retry: 2
    tags:
        - aws
    only:
        - master
'bootstrap:centos-7':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/bootstrap/centos-7'
        - 'docker build --no-cache -t webdevops/bootstrap:centos-7 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/bootstrap:centos-7 --config bootstrap/test.yaml --config bootstrap/centos-7/test.yaml'
        - 'docker push webdevops/bootstrap:centos-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'bootstrap:debian-7':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/bootstrap/debian-7'
        - 'docker build --no-cache -t webdevops/bootstrap:debian-7 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/bootstrap:debian-7 --config bootstrap/test.yaml'
        - 'docker push webdevops/bootstrap:debian-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'bootstrap:debian-8':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/bootstrap/debian-8'
        - 'docker build --no-cache -t webdevops/bootstrap:debian-8 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/bootstrap:debian-8 --config bootstrap/test.yaml --config bootstrap/debian-8/test.yaml'
        - 'docker push webdevops/bootstrap:debian-8'
    retry: 2
    tags:
        - aws
    only:
        - master
'bootstrap:debian-9':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/bootstrap/debian-9'
        - 'docker build --no-cache -t webdevops/bootstrap:debian-9 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/bootstrap:debian-9 --config bootstrap/test.yaml --config bootstrap/debian-9/test.yaml'
        - 'docker push webdevops/bootstrap:debian-9'
    retry: 2
    tags:
        - aws
    only:
        - master
'bootstrap:ubuntu-12.04':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/bootstrap/ubuntu-12.04'
        - 'docker build --no-cache -t webdevops/bootstrap:ubuntu-12.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/bootstrap:ubuntu-12.04 --config bootstrap/test.yaml'
        - 'docker push webdevops/bootstrap:ubuntu-12.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'bootstrap:ubuntu-14.04':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/bootstrap/ubuntu-14.04'
        - 'docker build --no-cache -t webdevops/bootstrap:ubuntu-14.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/bootstrap:ubuntu-14.04 --config bootstrap/test.yaml'
        - 'docker push webdevops/bootstrap:ubuntu-14.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'bootstrap:ubuntu-15.04':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/bootstrap/ubuntu-15.04'
        - 'docker build --no-cache -t webdevops/bootstrap:ubuntu-15.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/bootstrap:ubuntu-15.04 --config bootstrap/test.yaml'
        - 'docker push webdevops/bootstrap:ubuntu-15.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'bootstrap:ubuntu-15.10':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/bootstrap/ubuntu-15.10'
        - 'docker build --no-cache -t webdevops/bootstrap:ubuntu-15.10 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/bootstrap:ubuntu-15.10 --config bootstrap/test.yaml'
        - 'docker push webdevops/bootstrap:ubuntu-15.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'bootstrap:ubuntu-16.04':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/bootstrap/ubuntu-16.04'
        - 'docker build --no-cache -t webdevops/bootstrap:ubuntu-16.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/bootstrap:ubuntu-16.04 --config bootstrap/test.yaml --config bootstrap/ubuntu-16.04/test.yaml'
        - 'docker push webdevops/bootstrap:ubuntu-16.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'bootstrap:ubuntu-16.10':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/bootstrap/ubuntu-16.10'
        - 'docker build --no-cache -t webdevops/bootstrap:ubuntu-16.10 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/bootstrap:ubuntu-16.10 --config bootstrap/test.yaml --config bootstrap/ubuntu-16.10/test.yaml'
        - 'docker push webdevops/bootstrap:ubuntu-16.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'bootstrap:ubuntu-17.04':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/bootstrap/ubuntu-17.04'
        - 'docker build --no-cache -t webdevops/bootstrap:ubuntu-17.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/bootstrap:ubuntu-17.04 --config bootstrap/test.yaml --config bootstrap/ubuntu-17.04/test.yaml'
        - 'docker push webdevops/bootstrap:ubuntu-17.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'bootstrap:ubuntu-17.10':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/bootstrap/ubuntu-17.10'
        - 'docker build --no-cache -t webdevops/bootstrap:ubuntu-17.10 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/bootstrap:ubuntu-17.10 --config bootstrap/test.yaml --config bootstrap/ubuntu-17.10/test.yaml'
        - 'docker push webdevops/bootstrap:ubuntu-17.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'bootstrap:ubuntu-18.04':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/bootstrap/ubuntu-18.04'
        - 'docker build --no-cache -t webdevops/bootstrap:ubuntu-18.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/bootstrap:ubuntu-18.04 --config bootstrap/test.yaml --config bootstrap/ubuntu-18.04/test.yaml'
        - 'docker push webdevops/bootstrap:ubuntu-18.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'liquibase:latest':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/liquibase/latest'
        - 'docker build --no-cache -t webdevops/liquibase:latest .'
        - 'docker push webdevops/liquibase:latest'
    retry: 2
    tags:
        - aws
    only:
        - master
'liquibase:mysql':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/liquibase/mysql'
        - 'docker build --no-cache -t webdevops/liquibase:mysql .'
        - 'docker push webdevops/liquibase:mysql'
    retry: 2
    tags:
        - aws
    only:
        - master
'liquibase:postgres':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/liquibase/postgres'
        - 'docker build --no-cache -t webdevops/liquibase:postgres .'
        - 'docker push webdevops/liquibase:postgres'
    retry: 2
    tags:
        - aws
    only:
        - master
'php:5.6':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-official/5.6'
        - 'docker build --no-cache -t webdevops/php:5.6 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/php:5.6 --config php/test.yaml'
        - 'docker push webdevops/php:5.6'
    retry: 2
    tags:
        - aws
    only:
        - master
'php:7.0':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-official/7.0'
        - 'docker build --no-cache -t webdevops/php:7.0 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/php:7.0 --config php/test.yaml --config php/7.0/test.yaml'
        - 'docker push webdevops/php:7.0'
    retry: 2
    tags:
        - aws
    only:
        - master
'php:7.1':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-official/7.1'
        - 'docker build --no-cache -t webdevops/php:7.1 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/php:7.1 --config php/test.yaml --config php/7.1/test.yaml'
        - 'docker push webdevops/php:7.1'
    retry: 2
    tags:
        - aws
    only:
        - master
'php:7.2':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-official/7.2'
        - 'docker build --no-cache -t webdevops/php:7.2 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/php:7.2 --config php/test.yaml --config php/7.2/test.yaml'
        - 'docker push webdevops/php:7.2'
    retry: 2
    tags:
        - aws
    only:
        - master
'samson-deployment:latest':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/samson-deployment/latest'
        - 'docker build --no-cache -t webdevops/samson-deployment:latest .'
        - 'docker push webdevops/samson-deployment:latest'
    retry: 2
    tags:
        - aws
    only:
        - master
'storage:latest':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/storage/latest'
        - 'docker build --no-cache -t webdevops/storage:latest .'
        - 'docker push webdevops/storage:latest'
    retry: 2
    tags:
        - aws
    only:
        - master
'toolbox:latest':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/toolbox/latest'
        - 'docker build --no-cache -t webdevops/toolbox:latest .'
        - 'docker push webdevops/toolbox:latest'
    retry: 2
    tags:
        - aws
    only:
        - master
'typo3-solr:3.1':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/typo3-solr/3.1'
        - 'docker build --no-cache -t webdevops/typo3-solr:3.1 .'
        - 'docker push webdevops/typo3-solr:3.1'
    retry: 2
    tags:
        - aws
    only:
        - master
'typo3-solr:5.0':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/typo3-solr/5.0'
        - 'docker build --no-cache -t webdevops/typo3-solr:5.0 .'
        - 'docker push webdevops/typo3-solr:5.0'
    retry: 2
    tags:
        - aws
    only:
        - master
'typo3-solr:6.0':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/typo3-solr/6.0'
        - 'docker build --no-cache -t webdevops/typo3-solr:6.0 .'
        - 'docker push webdevops/typo3-solr:6.0'
    retry: 2
    tags:
        - aws
    only:
        - master
'typo3-solr:6.1':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/typo3-solr/6.1'
        - 'docker build --no-cache -t webdevops/typo3-solr:6.1 .'
        - 'docker push webdevops/typo3-solr:6.1'
    retry: 2
    tags:
        - aws
    only:
        - master
'typo3-solr:6.5':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/typo3-solr/6.5'
        - 'docker build --no-cache -t webdevops/typo3-solr:6.5 .'
        - 'docker push webdevops/typo3-solr:6.5'
    retry: 2
    tags:
        - aws
    only:
        - master
'typo3-solr:7.0':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/typo3-solr/7.0'
        - 'docker build --no-cache -t webdevops/typo3-solr:7.0 .'
        - 'docker push webdevops/typo3-solr:7.0'
    retry: 2
    tags:
        - aws
    only:
        - master
'typo3-solr:7.5':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/typo3-solr/7.5'
        - 'docker build --no-cache -t webdevops/typo3-solr:7.5 .'
        - 'docker push webdevops/typo3-solr:7.5'
    retry: 2
    tags:
        - aws
    only:
        - master
'typo3-solr:8.0':
    stage: level0
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/typo3-solr/8.0'
        - 'docker build --no-cache -t webdevops/typo3-solr:8.0 .'
        - 'docker push webdevops/typo3-solr:8.0'
    retry: 2
    tags:
        - aws
    only:
        - master
'ansible:alpine':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/ansible/alpine'
        - 'docker build --no-cache -t webdevops/ansible:alpine .'
        - 'docker push webdevops/ansible:alpine'
    retry: 2
    tags:
        - aws
    only:
        - master
'ansible:centos-7':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/ansible/centos-7'
        - 'docker build --no-cache -t webdevops/ansible:centos-7 .'
        - 'docker push webdevops/ansible:centos-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'ansible:debian-7':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/ansible/debian-7'
        - 'docker build --no-cache -t webdevops/ansible:debian-7 .'
        - 'docker push webdevops/ansible:debian-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'ansible:debian-8':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/ansible/debian-8'
        - 'docker build --no-cache -t webdevops/ansible:debian-8 .'
        - 'docker push webdevops/ansible:debian-8'
    retry: 2
    tags:
        - aws
    only:
        - master
'ansible:debian-9':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/ansible/debian-9'
        - 'docker build --no-cache -t webdevops/ansible:debian-9 .'
        - 'docker push webdevops/ansible:debian-9'
    retry: 2
    tags:
        - aws
    only:
        - master
'ansible:ubuntu-12.04':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/ansible/ubuntu-12.04'
        - 'docker build --no-cache -t webdevops/ansible:ubuntu-12.04 .'
        - 'docker push webdevops/ansible:ubuntu-12.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'ansible:ubuntu-14.04':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/ansible/ubuntu-14.04'
        - 'docker build --no-cache -t webdevops/ansible:ubuntu-14.04 .'
        - 'docker push webdevops/ansible:ubuntu-14.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'ansible:ubuntu-15.04':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/ansible/ubuntu-15.04'
        - 'docker build --no-cache -t webdevops/ansible:ubuntu-15.04 .'
        - 'docker push webdevops/ansible:ubuntu-15.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'ansible:ubuntu-15.10':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/ansible/ubuntu-15.10'
        - 'docker build --no-cache -t webdevops/ansible:ubuntu-15.10 .'
        - 'docker push webdevops/ansible:ubuntu-15.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'ansible:ubuntu-16.04':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/ansible/ubuntu-16.04'
        - 'docker build --no-cache -t webdevops/ansible:ubuntu-16.04 .'
        - 'docker push webdevops/ansible:ubuntu-16.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'ansible:ubuntu-17.04':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/ansible/ubuntu-17.04'
        - 'docker build --no-cache -t webdevops/ansible:ubuntu-17.04 .'
        - 'docker push webdevops/ansible:ubuntu-17.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'base:alpine':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base/alpine'
        - 'docker build --no-cache -t webdevops/base:alpine .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base:alpine --config base/test.yaml --config base/alpine/test.yaml'
        - 'docker push webdevops/base:alpine'
    retry: 2
    tags:
        - aws
    only:
        - master
'base:centos-7':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base/centos-7'
        - 'docker build --no-cache -t webdevops/base:centos-7 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base:centos-7 --config base/test.yaml --config base/centos-7/test.yaml'
        - 'docker push webdevops/base:centos-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'base:debian-7':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base/debian-7'
        - 'docker build --no-cache -t webdevops/base:debian-7 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base:debian-7 --config base/test.yaml --config base/debian-7/test.yaml'
        - 'docker push webdevops/base:debian-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'base:debian-8':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base/debian-8'
        - 'docker build --no-cache -t webdevops/base:debian-8 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base:debian-8 --config base/test.yaml --config base/debian-8/test.yaml'
        - 'docker push webdevops/base:debian-8'
    retry: 2
    tags:
        - aws
    only:
        - master
'base:debian-9':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base/debian-9'
        - 'docker build --no-cache -t webdevops/base:debian-9 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base:debian-9 --config base/test.yaml --config base/debian-9/test.yaml'
        - 'docker push webdevops/base:debian-9'
    retry: 2
    tags:
        - aws
    only:
        - master
'base:ubuntu-12.04':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base/ubuntu-12.04'
        - 'docker build --no-cache -t webdevops/base:ubuntu-12.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base:ubuntu-12.04 --config base/test.yaml --config base/ubuntu-12.04/test.yaml'
        - 'docker push webdevops/base:ubuntu-12.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'base:ubuntu-14.04':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base/ubuntu-14.04'
        - 'docker build --no-cache -t webdevops/base:ubuntu-14.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base:ubuntu-14.04 --config base/test.yaml --config base/ubuntu-14.04/test.yaml'
        - 'docker push webdevops/base:ubuntu-14.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'base:ubuntu-15.04':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base/ubuntu-15.04'
        - 'docker build --no-cache -t webdevops/base:ubuntu-15.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base:ubuntu-15.04 --config base/test.yaml --config base/ubuntu-15.04/test.yaml'
        - 'docker push webdevops/base:ubuntu-15.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'base:ubuntu-15.10':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base/ubuntu-15.10'
        - 'docker build --no-cache -t webdevops/base:ubuntu-15.10 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base:ubuntu-15.10 --config base/test.yaml --config base/ubuntu-15.10/test.yaml'
        - 'docker push webdevops/base:ubuntu-15.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'base:ubuntu-16.04':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base/ubuntu-16.04'
        - 'docker build --no-cache -t webdevops/base:ubuntu-16.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base:ubuntu-16.04 --config base/test.yaml --config base/ubuntu-16.04/test.yaml'
        - 'docker push webdevops/base:ubuntu-16.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'base:ubuntu-16.10':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base/ubuntu-16.10'
        - 'docker build --no-cache -t webdevops/base:ubuntu-16.10 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base:ubuntu-16.10 --config base/test.yaml --config base/ubuntu-16.10/test.yaml'
        - 'docker push webdevops/base:ubuntu-16.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'base:ubuntu-17.04':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base/ubuntu-17.04'
        - 'docker build --no-cache -t webdevops/base:ubuntu-17.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base:ubuntu-17.04 --config base/test.yaml --config base/ubuntu-17.04/test.yaml'
        - 'docker push webdevops/base:ubuntu-17.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'base:ubuntu-17.10':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base/ubuntu-17.10'
        - 'docker build --no-cache -t webdevops/base:ubuntu-17.10 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base:ubuntu-17.10 --config base/test.yaml --config base/ubuntu-17.10/test.yaml'
        - 'docker push webdevops/base:ubuntu-17.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'base:ubuntu-18.04':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base/ubuntu-18.04'
        - 'docker build --no-cache -t webdevops/base:ubuntu-18.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base:ubuntu-18.04 --config base/test.yaml --config base/ubuntu-18.04/test.yaml'
        - 'docker push webdevops/base:ubuntu-18.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'certbot:latest':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/certbot/latest'
        - 'docker build --no-cache -t webdevops/certbot:latest .'
        - 'docker push webdevops/certbot:latest'
    retry: 2
    tags:
        - aws
    only:
        - master
'dockerfile-build-env:latest':
    stage: build-env
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/dockerfile-build-env/latest'
        - 'docker build --no-cache -t webdevops/dockerfile-build-env:latest .'
        - 'docker push webdevops/dockerfile-build-env:latest'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache:5.6':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache/5.6'
        - 'docker build --no-cache -t webdevops/php-apache:5.6 .'
        - 'docker push webdevops/php-apache:5.6'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache:7.0':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache/7.0'
        - 'docker build --no-cache -t webdevops/php-apache:7.0 .'
        - 'docker push webdevops/php-apache:7.0'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache:7.1':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache/7.1'
        - 'docker build --no-cache -t webdevops/php-apache:7.1 .'
        - 'docker push webdevops/php-apache:7.1'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache:7.2':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache/7.2'
        - 'docker build --no-cache -t webdevops/php-apache:7.2 .'
        - 'docker push webdevops/php-apache:7.2'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-dev:5.6':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-dev/5.6'
        - 'docker build --no-cache -t webdevops/php-dev:5.6 .'
        - 'docker push webdevops/php-dev:5.6'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-dev:7.0':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-dev/7.0'
        - 'docker build --no-cache -t webdevops/php-dev:7.0 .'
        - 'docker push webdevops/php-dev:7.0'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-dev:7.1':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-dev/7.1'
        - 'docker build --no-cache -t webdevops/php-dev:7.1 .'
        - 'docker push webdevops/php-dev:7.1'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-dev:7.2':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-dev/7.2'
        - 'docker build --no-cache -t webdevops/php-dev:7.2 .'
        - 'docker push webdevops/php-dev:7.2'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx:5.6':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx/5.6'
        - 'docker build --no-cache -t webdevops/php-nginx:5.6 .'
        - 'docker push webdevops/php-nginx:5.6'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx:7.0':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx/7.0'
        - 'docker build --no-cache -t webdevops/php-nginx:7.0 .'
        - 'docker push webdevops/php-nginx:7.0'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx:7.1':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx/7.1'
        - 'docker build --no-cache -t webdevops/php-nginx:7.1 .'
        - 'docker push webdevops/php-nginx:7.1'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx:7.2':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx/7.2'
        - 'docker build --no-cache -t webdevops/php-nginx:7.2 .'
        - 'docker push webdevops/php-nginx:7.2'
    retry: 2
    tags:
        - aws
    only:
        - master
'sphinx:latest':
    stage: level1
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/sphinx/latest'
        - 'docker build --no-cache -t webdevops/sphinx:latest .'
        - 'docker push webdevops/sphinx:latest'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache:alpine':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache/alpine'
        - 'docker build --no-cache -t webdevops/apache:alpine .'
        - 'docker push webdevops/apache:alpine'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache:centos-7':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache/centos-7'
        - 'docker build --no-cache -t webdevops/apache:centos-7 .'
        - 'docker push webdevops/apache:centos-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache:debian-7':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache/debian-7'
        - 'docker build --no-cache -t webdevops/apache:debian-7 .'
        - 'docker push webdevops/apache:debian-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache:debian-8':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache/debian-8'
        - 'docker build --no-cache -t webdevops/apache:debian-8 .'
        - 'docker push webdevops/apache:debian-8'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache:debian-9':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache/debian-9'
        - 'docker build --no-cache -t webdevops/apache:debian-9 .'
        - 'docker push webdevops/apache:debian-9'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache:ubuntu-12.04':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache/ubuntu-12.04'
        - 'docker build --no-cache -t webdevops/apache:ubuntu-12.04 .'
        - 'docker push webdevops/apache:ubuntu-12.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache:ubuntu-14.04':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache/ubuntu-14.04'
        - 'docker build --no-cache -t webdevops/apache:ubuntu-14.04 .'
        - 'docker push webdevops/apache:ubuntu-14.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache:ubuntu-15.04':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache/ubuntu-15.04'
        - 'docker build --no-cache -t webdevops/apache:ubuntu-15.04 .'
        - 'docker push webdevops/apache:ubuntu-15.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache:ubuntu-15.10':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache/ubuntu-15.10'
        - 'docker build --no-cache -t webdevops/apache:ubuntu-15.10 .'
        - 'docker push webdevops/apache:ubuntu-15.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache:ubuntu-16.04':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache/ubuntu-16.04'
        - 'docker build --no-cache -t webdevops/apache:ubuntu-16.04 .'
        - 'docker push webdevops/apache:ubuntu-16.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache:ubuntu-16.10':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache/ubuntu-16.10'
        - 'docker build --no-cache -t webdevops/apache:ubuntu-16.10 .'
        - 'docker push webdevops/apache:ubuntu-16.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache:ubuntu-17.04':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache/ubuntu-17.04'
        - 'docker build --no-cache -t webdevops/apache:ubuntu-17.04 .'
        - 'docker push webdevops/apache:ubuntu-17.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache:ubuntu-17.10':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache/ubuntu-17.10'
        - 'docker build --no-cache -t webdevops/apache:ubuntu-17.10 .'
        - 'docker push webdevops/apache:ubuntu-17.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache:ubuntu-18.04':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache/ubuntu-18.04'
        - 'docker build --no-cache -t webdevops/apache:ubuntu-18.04 .'
        - 'docker push webdevops/apache:ubuntu-18.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'base-app:alpine':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base-app/alpine'
        - 'docker build --no-cache -t webdevops/base-app:alpine .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base-app:alpine --config base-app/test.yaml --config base-app/alpine/test.yaml'
        - 'docker push webdevops/base-app:alpine'
    retry: 2
    tags:
        - aws
    only:
        - master
'base-app:centos-7':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base-app/centos-7'
        - 'docker build --no-cache -t webdevops/base-app:centos-7 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base-app:centos-7 --config base-app/test.yaml --config base-app/centos-7/test.yaml'
        - 'docker push webdevops/base-app:centos-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'base-app:debian-7':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base-app/debian-7'
        - 'docker build --no-cache -t webdevops/base-app:debian-7 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base-app:debian-7 --config base-app/test.yaml --config base-app/debian-7/test.yaml'
        - 'docker push webdevops/base-app:debian-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'base-app:debian-8':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base-app/debian-8'
        - 'docker build --no-cache -t webdevops/base-app:debian-8 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base-app:debian-8 --config base-app/test.yaml --config base-app/debian-8/test.yaml'
        - 'docker push webdevops/base-app:debian-8'
    retry: 2
    tags:
        - aws
    only:
        - master
'base-app:debian-9':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base-app/debian-9'
        - 'docker build --no-cache -t webdevops/base-app:debian-9 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base-app:debian-9 --config base-app/test.yaml --config base-app/debian-9/test.yaml'
        - 'docker push webdevops/base-app:debian-9'
    retry: 2
    tags:
        - aws
    only:
        - master
'base-app:ubuntu-12.04':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base-app/ubuntu-12.04'
        - 'docker build --no-cache -t webdevops/base-app:ubuntu-12.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base-app:ubuntu-12.04 --config base-app/test.yaml --config base-app/ubuntu-12.04/test.yaml'
        - 'docker push webdevops/base-app:ubuntu-12.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'base-app:ubuntu-14.04':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base-app/ubuntu-14.04'
        - 'docker build --no-cache -t webdevops/base-app:ubuntu-14.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base-app:ubuntu-14.04 --config base-app/test.yaml --config base-app/ubuntu-14.04/test.yaml'
        - 'docker push webdevops/base-app:ubuntu-14.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'base-app:ubuntu-15.04':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base-app/ubuntu-15.04'
        - 'docker build --no-cache -t webdevops/base-app:ubuntu-15.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base-app:ubuntu-15.04 --config base-app/test.yaml --config base-app/ubuntu-15.04/test.yaml'
        - 'docker push webdevops/base-app:ubuntu-15.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'base-app:ubuntu-15.10':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base-app/ubuntu-15.10'
        - 'docker build --no-cache -t webdevops/base-app:ubuntu-15.10 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base-app:ubuntu-15.10 --config base-app/test.yaml --config base-app/ubuntu-15.10/test.yaml'
        - 'docker push webdevops/base-app:ubuntu-15.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'base-app:ubuntu-16.04':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base-app/ubuntu-16.04'
        - 'docker build --no-cache -t webdevops/base-app:ubuntu-16.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base-app:ubuntu-16.04 --config base-app/test.yaml --config base-app/ubuntu-16.04/test.yaml'
        - 'docker push webdevops/base-app:ubuntu-16.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'base-app:ubuntu-16.10':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base-app/ubuntu-16.10'
        - 'docker build --no-cache -t webdevops/base-app:ubuntu-16.10 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base-app:ubuntu-16.10 --config base-app/test.yaml --config base-app/ubuntu-16.10/test.yaml'
        - 'docker push webdevops/base-app:ubuntu-16.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'base-app:ubuntu-17.04':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base-app/ubuntu-17.04'
        - 'docker build --no-cache -t webdevops/base-app:ubuntu-17.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base-app:ubuntu-17.04 --config base-app/test.yaml --config base-app/ubuntu-17.04/test.yaml'
        - 'docker push webdevops/base-app:ubuntu-17.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'base-app:ubuntu-17.10':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base-app/ubuntu-17.10'
        - 'docker build --no-cache -t webdevops/base-app:ubuntu-17.10 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base-app:ubuntu-17.10 --config base-app/test.yaml --config base-app/ubuntu-17.10/test.yaml'
        - 'docker push webdevops/base-app:ubuntu-17.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'base-app:ubuntu-18.04':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/base-app/ubuntu-18.04'
        - 'docker build --no-cache -t webdevops/base-app:ubuntu-18.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/base-app:ubuntu-18.04 --config base-app/test.yaml --config base-app/ubuntu-18.04/test.yaml'
        - 'docker push webdevops/base-app:ubuntu-18.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'liquidsoap:latest':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/liquidsoap/latest'
        - 'docker build --no-cache -t webdevops/liquidsoap:latest .'
        - 'docker push webdevops/liquidsoap:latest'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx:alpine':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx/alpine'
        - 'docker build --no-cache -t webdevops/nginx:alpine .'
        - 'docker push webdevops/nginx:alpine'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx:centos-7':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx/centos-7'
        - 'docker build --no-cache -t webdevops/nginx:centos-7 .'
        - 'docker push webdevops/nginx:centos-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx:debian-7':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx/debian-7'
        - 'docker build --no-cache -t webdevops/nginx:debian-7 .'
        - 'docker push webdevops/nginx:debian-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx:debian-8':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx/debian-8'
        - 'docker build --no-cache -t webdevops/nginx:debian-8 .'
        - 'docker push webdevops/nginx:debian-8'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx:debian-9':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx/debian-9'
        - 'docker build --no-cache -t webdevops/nginx:debian-9 .'
        - 'docker push webdevops/nginx:debian-9'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx:ubuntu-12.04':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx/ubuntu-12.04'
        - 'docker build --no-cache -t webdevops/nginx:ubuntu-12.04 .'
        - 'docker push webdevops/nginx:ubuntu-12.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx:ubuntu-14.04':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx/ubuntu-14.04'
        - 'docker build --no-cache -t webdevops/nginx:ubuntu-14.04 .'
        - 'docker push webdevops/nginx:ubuntu-14.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx:ubuntu-15.04':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx/ubuntu-15.04'
        - 'docker build --no-cache -t webdevops/nginx:ubuntu-15.04 .'
        - 'docker push webdevops/nginx:ubuntu-15.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx:ubuntu-15.10':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx/ubuntu-15.10'
        - 'docker build --no-cache -t webdevops/nginx:ubuntu-15.10 .'
        - 'docker push webdevops/nginx:ubuntu-15.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx:ubuntu-16.04':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx/ubuntu-16.04'
        - 'docker build --no-cache -t webdevops/nginx:ubuntu-16.04 .'
        - 'docker push webdevops/nginx:ubuntu-16.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx:ubuntu-16.10':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx/ubuntu-16.10'
        - 'docker build --no-cache -t webdevops/nginx:ubuntu-16.10 .'
        - 'docker push webdevops/nginx:ubuntu-16.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx:ubuntu-17.04':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx/ubuntu-17.04'
        - 'docker build --no-cache -t webdevops/nginx:ubuntu-17.04 .'
        - 'docker push webdevops/nginx:ubuntu-17.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx:ubuntu-17.10':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx/ubuntu-17.10'
        - 'docker build --no-cache -t webdevops/nginx:ubuntu-17.10 .'
        - 'docker push webdevops/nginx:ubuntu-17.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx:ubuntu-18.04':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx/ubuntu-18.04'
        - 'docker build --no-cache -t webdevops/nginx:ubuntu-18.04 .'
        - 'docker push webdevops/nginx:ubuntu-18.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache-dev:5.6':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache-dev/5.6'
        - 'docker build --no-cache -t webdevops/php-apache-dev:5.6 .'
        - 'docker push webdevops/php-apache-dev:5.6'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache-dev:7.0':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache-dev/7.0'
        - 'docker build --no-cache -t webdevops/php-apache-dev:7.0 .'
        - 'docker push webdevops/php-apache-dev:7.0'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache-dev:7.1':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache-dev/7.1'
        - 'docker build --no-cache -t webdevops/php-apache-dev:7.1 .'
        - 'docker push webdevops/php-apache-dev:7.1'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache-dev:7.2':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache-dev/7.2'
        - 'docker build --no-cache -t webdevops/php-apache-dev:7.2 .'
        - 'docker push webdevops/php-apache-dev:7.2'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx-dev:5.6':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx-dev/5.6'
        - 'docker build --no-cache -t webdevops/php-nginx-dev:5.6 .'
        - 'docker push webdevops/php-nginx-dev:5.6'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx-dev:7.0':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx-dev/7.0'
        - 'docker build --no-cache -t webdevops/php-nginx-dev:7.0 .'
        - 'docker push webdevops/php-nginx-dev:7.0'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx-dev:7.1':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx-dev/7.1'
        - 'docker build --no-cache -t webdevops/php-nginx-dev:7.1 .'
        - 'docker push webdevops/php-nginx-dev:7.1'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx-dev:7.2':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx-dev/7.2'
        - 'docker build --no-cache -t webdevops/php-nginx-dev:7.2 .'
        - 'docker push webdevops/php-nginx-dev:7.2'
    retry: 2
    tags:
        - aws
    only:
        - master
'piwik:latest':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/piwik/latest'
        - 'docker build --no-cache -t webdevops/piwik:latest .'
        - 'docker push webdevops/piwik:latest'
    retry: 2
    tags:
        - aws
    only:
        - master
'typo3:latest':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/typo3/latest'
        - 'docker build --no-cache -t webdevops/typo3:latest .'
        - 'docker push webdevops/typo3:latest'
    retry: 2
    tags:
        - aws
    only:
        - master
'varnish:latest':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/varnish/latest'
        - 'docker build --no-cache -t webdevops/varnish:latest .'
        - 'docker push webdevops/varnish:latest'
    retry: 2
    tags:
        - aws
    only:
        - master
'vsftp:latest':
    stage: level2
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/vsftp/latest'
        - 'docker build --no-cache -t webdevops/vsftp:latest .'
        - 'docker push webdevops/vsftp:latest'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache-dev:alpine':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache-dev/alpine'
        - 'docker build --no-cache -t webdevops/apache-dev:alpine .'
        - 'docker push webdevops/apache-dev:alpine'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache-dev:centos-7':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache-dev/centos-7'
        - 'docker build --no-cache -t webdevops/apache-dev:centos-7 .'
        - 'docker push webdevops/apache-dev:centos-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache-dev:debian-7':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache-dev/debian-7'
        - 'docker build --no-cache -t webdevops/apache-dev:debian-7 .'
        - 'docker push webdevops/apache-dev:debian-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache-dev:debian-8':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache-dev/debian-8'
        - 'docker build --no-cache -t webdevops/apache-dev:debian-8 .'
        - 'docker push webdevops/apache-dev:debian-8'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache-dev:debian-9':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache-dev/debian-9'
        - 'docker build --no-cache -t webdevops/apache-dev:debian-9 .'
        - 'docker push webdevops/apache-dev:debian-9'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache-dev:ubuntu-12.04':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache-dev/ubuntu-12.04'
        - 'docker build --no-cache -t webdevops/apache-dev:ubuntu-12.04 .'
        - 'docker push webdevops/apache-dev:ubuntu-12.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache-dev:ubuntu-14.04':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache-dev/ubuntu-14.04'
        - 'docker build --no-cache -t webdevops/apache-dev:ubuntu-14.04 .'
        - 'docker push webdevops/apache-dev:ubuntu-14.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache-dev:ubuntu-15.04':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache-dev/ubuntu-15.04'
        - 'docker build --no-cache -t webdevops/apache-dev:ubuntu-15.04 .'
        - 'docker push webdevops/apache-dev:ubuntu-15.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache-dev:ubuntu-15.10':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache-dev/ubuntu-15.10'
        - 'docker build --no-cache -t webdevops/apache-dev:ubuntu-15.10 .'
        - 'docker push webdevops/apache-dev:ubuntu-15.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache-dev:ubuntu-16.04':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache-dev/ubuntu-16.04'
        - 'docker build --no-cache -t webdevops/apache-dev:ubuntu-16.04 .'
        - 'docker push webdevops/apache-dev:ubuntu-16.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache-dev:ubuntu-16.10':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache-dev/ubuntu-16.10'
        - 'docker build --no-cache -t webdevops/apache-dev:ubuntu-16.10 .'
        - 'docker push webdevops/apache-dev:ubuntu-16.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache-dev:ubuntu-17.04':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache-dev/ubuntu-17.04'
        - 'docker build --no-cache -t webdevops/apache-dev:ubuntu-17.04 .'
        - 'docker push webdevops/apache-dev:ubuntu-17.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache-dev:ubuntu-17.10':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache-dev/ubuntu-17.10'
        - 'docker build --no-cache -t webdevops/apache-dev:ubuntu-17.10 .'
        - 'docker push webdevops/apache-dev:ubuntu-17.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'apache-dev:ubuntu-18.04':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/apache-dev/ubuntu-18.04'
        - 'docker build --no-cache -t webdevops/apache-dev:ubuntu-18.04 .'
        - 'docker push webdevops/apache-dev:ubuntu-18.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'hhvm:ubuntu-14.04':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/hhvm/ubuntu-14.04'
        - 'docker build --no-cache -t webdevops/hhvm:ubuntu-14.04 .'
        - 'docker push webdevops/hhvm:ubuntu-14.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'hhvm:ubuntu-16.04':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/hhvm/ubuntu-16.04'
        - 'docker build --no-cache -t webdevops/hhvm:ubuntu-16.04 .'
        - 'docker push webdevops/hhvm:ubuntu-16.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx-dev:alpine':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx-dev/alpine'
        - 'docker build --no-cache -t webdevops/nginx-dev:alpine .'
        - 'docker push webdevops/nginx-dev:alpine'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx-dev:centos-7':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx-dev/centos-7'
        - 'docker build --no-cache -t webdevops/nginx-dev:centos-7 .'
        - 'docker push webdevops/nginx-dev:centos-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx-dev:debian-7':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx-dev/debian-7'
        - 'docker build --no-cache -t webdevops/nginx-dev:debian-7 .'
        - 'docker push webdevops/nginx-dev:debian-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx-dev:debian-8':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx-dev/debian-8'
        - 'docker build --no-cache -t webdevops/nginx-dev:debian-8 .'
        - 'docker push webdevops/nginx-dev:debian-8'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx-dev:debian-9':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx-dev/debian-9'
        - 'docker build --no-cache -t webdevops/nginx-dev:debian-9 .'
        - 'docker push webdevops/nginx-dev:debian-9'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx-dev:ubuntu-12.04':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx-dev/ubuntu-12.04'
        - 'docker build --no-cache -t webdevops/nginx-dev:ubuntu-12.04 .'
        - 'docker push webdevops/nginx-dev:ubuntu-12.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx-dev:ubuntu-14.04':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx-dev/ubuntu-14.04'
        - 'docker build --no-cache -t webdevops/nginx-dev:ubuntu-14.04 .'
        - 'docker push webdevops/nginx-dev:ubuntu-14.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx-dev:ubuntu-15.04':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx-dev/ubuntu-15.04'
        - 'docker build --no-cache -t webdevops/nginx-dev:ubuntu-15.04 .'
        - 'docker push webdevops/nginx-dev:ubuntu-15.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx-dev:ubuntu-15.10':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx-dev/ubuntu-15.10'
        - 'docker build --no-cache -t webdevops/nginx-dev:ubuntu-15.10 .'
        - 'docker push webdevops/nginx-dev:ubuntu-15.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx-dev:ubuntu-16.04':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx-dev/ubuntu-16.04'
        - 'docker build --no-cache -t webdevops/nginx-dev:ubuntu-16.04 .'
        - 'docker push webdevops/nginx-dev:ubuntu-16.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx-dev:ubuntu-16.10':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx-dev/ubuntu-16.10'
        - 'docker build --no-cache -t webdevops/nginx-dev:ubuntu-16.10 .'
        - 'docker push webdevops/nginx-dev:ubuntu-16.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx-dev:ubuntu-17.04':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx-dev/ubuntu-17.04'
        - 'docker build --no-cache -t webdevops/nginx-dev:ubuntu-17.04 .'
        - 'docker push webdevops/nginx-dev:ubuntu-17.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx-dev:ubuntu-17.10':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx-dev/ubuntu-17.10'
        - 'docker build --no-cache -t webdevops/nginx-dev:ubuntu-17.10 .'
        - 'docker push webdevops/nginx-dev:ubuntu-17.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'nginx-dev:ubuntu-18.04':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/nginx-dev/ubuntu-18.04'
        - 'docker build --no-cache -t webdevops/nginx-dev:ubuntu-18.04 .'
        - 'docker push webdevops/nginx-dev:ubuntu-18.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php:alpine-php5':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php/alpine-php5'
        - 'docker build --no-cache -t webdevops/php:alpine-php5 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/php:alpine-php5 --config php/test.yaml'
        - 'docker push webdevops/php:alpine-php5'
    retry: 2
    tags:
        - aws
    only:
        - master
'php:alpine-php7':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php/alpine-php7'
        - 'docker build --no-cache -t webdevops/php:alpine-php7 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/php:alpine-php7 --config php/test.yaml'
        - 'docker push webdevops/php:alpine-php7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php:centos-7':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php/centos-7'
        - 'docker build --no-cache -t webdevops/php:centos-7 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/php:centos-7 --config php/test.yaml'
        - 'docker push webdevops/php:centos-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php:centos-7-php56':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php/centos-7-php56'
        - 'docker build --no-cache -t webdevops/php:centos-7-php56 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/php:centos-7-php56 --config php/test.yaml'
        - 'docker push webdevops/php:centos-7-php56'
    retry: 2
    tags:
        - aws
    only:
        - master
'php:centos-7-php7':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php/centos-7-php7'
        - 'docker build --no-cache -t webdevops/php:centos-7-php7 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/php:centos-7-php7 --config php/test.yaml'
        - 'docker push webdevops/php:centos-7-php7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php:debian-7':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php/debian-7'
        - 'docker build --no-cache -t webdevops/php:debian-7 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/php:debian-7 --config php/test.yaml'
        - 'docker push webdevops/php:debian-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php:debian-8':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php/debian-8'
        - 'docker build --no-cache -t webdevops/php:debian-8 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/php:debian-8 --config php/test.yaml'
        - 'docker push webdevops/php:debian-8'
    retry: 2
    tags:
        - aws
    only:
        - master
'php:debian-8-php7':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php/debian-8-php7'
        - 'docker build --no-cache -t webdevops/php:debian-8-php7 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/php:debian-8-php7 --config php/test.yaml'
        - 'docker push webdevops/php:debian-8-php7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php:debian-9':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php/debian-9'
        - 'docker build --no-cache -t webdevops/php:debian-9 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/php:debian-9 --config php/test.yaml'
        - 'docker push webdevops/php:debian-9'
    retry: 2
    tags:
        - aws
    only:
        - master
'php:ubuntu-12.04':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php/ubuntu-12.04'
        - 'docker build --no-cache -t webdevops/php:ubuntu-12.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/php:ubuntu-12.04 --config php/test.yaml'
        - 'docker push webdevops/php:ubuntu-12.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php:ubuntu-14.04':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php/ubuntu-14.04'
        - 'docker build --no-cache -t webdevops/php:ubuntu-14.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/php:ubuntu-14.04 --config php/test.yaml'
        - 'docker push webdevops/php:ubuntu-14.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php:ubuntu-15.04':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php/ubuntu-15.04'
        - 'docker build --no-cache -t webdevops/php:ubuntu-15.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/php:ubuntu-15.04 --config php/test.yaml'
        - 'docker push webdevops/php:ubuntu-15.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php:ubuntu-15.10':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php/ubuntu-15.10'
        - 'docker build --no-cache -t webdevops/php:ubuntu-15.10 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/php:ubuntu-15.10 --config php/test.yaml'
        - 'docker push webdevops/php:ubuntu-15.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'php:ubuntu-16.04':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php/ubuntu-16.04'
        - 'docker build --no-cache -t webdevops/php:ubuntu-16.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/php:ubuntu-16.04 --config php/test.yaml'
        - 'docker push webdevops/php:ubuntu-16.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php:ubuntu-16.10':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php/ubuntu-16.10'
        - 'docker build --no-cache -t webdevops/php:ubuntu-16.10 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/php:ubuntu-16.10 --config php/test.yaml'
        - 'docker push webdevops/php:ubuntu-16.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'php:ubuntu-17.04':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php/ubuntu-17.04'
        - 'docker build --no-cache -t webdevops/php:ubuntu-17.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/php:ubuntu-17.04 --config php/test.yaml'
        - 'docker push webdevops/php:ubuntu-17.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php:ubuntu-17.10':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php/ubuntu-17.10'
        - 'docker build --no-cache -t webdevops/php:ubuntu-17.10 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/php:ubuntu-17.10 --config php/test.yaml'
        - 'docker push webdevops/php:ubuntu-17.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'php:ubuntu-18.04':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php/ubuntu-18.04'
        - 'docker build --no-cache -t webdevops/php:ubuntu-18.04 .'
        - 'cd $CI_BUILD_DIR/tests/structure-test'
        - 'container-structure-test test --image webdevops/php:ubuntu-18.04 --config php/test.yaml'
        - 'docker push webdevops/php:ubuntu-18.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'postfix:latest':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/postfix/latest'
        - 'docker build --no-cache -t webdevops/postfix:latest .'
        - 'docker push webdevops/postfix:latest'
    retry: 2
    tags:
        - aws
    only:
        - master
'ssh:latest':
    stage: level3
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/ssh/latest'
        - 'docker build --no-cache -t webdevops/ssh:latest .'
        - 'docker push webdevops/ssh:latest'
    retry: 2
    tags:
        - aws
    only:
        - master
'hhvm-apache:ubuntu-14.04':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/hhvm-apache/ubuntu-14.04'
        - 'docker build --no-cache -t webdevops/hhvm-apache:ubuntu-14.04 .'
        - 'docker push webdevops/hhvm-apache:ubuntu-14.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'hhvm-apache:ubuntu-16.04':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/hhvm-apache/ubuntu-16.04'
        - 'docker build --no-cache -t webdevops/hhvm-apache:ubuntu-16.04 .'
        - 'docker push webdevops/hhvm-apache:ubuntu-16.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'hhvm-nginx:ubuntu-14.04':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/hhvm-nginx/ubuntu-14.04'
        - 'docker build --no-cache -t webdevops/hhvm-nginx:ubuntu-14.04 .'
        - 'docker push webdevops/hhvm-nginx:ubuntu-14.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'hhvm-nginx:ubuntu-16.04':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/hhvm-nginx/ubuntu-16.04'
        - 'docker build --no-cache -t webdevops/hhvm-nginx:ubuntu-16.04 .'
        - 'docker push webdevops/hhvm-nginx:ubuntu-16.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache:alpine-php5':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache/alpine-php5'
        - 'docker build --no-cache -t webdevops/php-apache:alpine-php5 .'
        - 'docker push webdevops/php-apache:alpine-php5'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache:alpine-php7':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache/alpine-php7'
        - 'docker build --no-cache -t webdevops/php-apache:alpine-php7 .'
        - 'docker push webdevops/php-apache:alpine-php7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache:centos-7':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache/centos-7'
        - 'docker build --no-cache -t webdevops/php-apache:centos-7 .'
        - 'docker push webdevops/php-apache:centos-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache:centos-7-php56':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache/centos-7-php56'
        - 'docker build --no-cache -t webdevops/php-apache:centos-7-php56 .'
        - 'docker push webdevops/php-apache:centos-7-php56'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache:centos-7-php7':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache/centos-7-php7'
        - 'docker build --no-cache -t webdevops/php-apache:centos-7-php7 .'
        - 'docker push webdevops/php-apache:centos-7-php7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache:debian-7':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache/debian-7'
        - 'docker build --no-cache -t webdevops/php-apache:debian-7 .'
        - 'docker push webdevops/php-apache:debian-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache:debian-8':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache/debian-8'
        - 'docker build --no-cache -t webdevops/php-apache:debian-8 .'
        - 'docker push webdevops/php-apache:debian-8'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache:debian-8-php7':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache/debian-8-php7'
        - 'docker build --no-cache -t webdevops/php-apache:debian-8-php7 .'
        - 'docker push webdevops/php-apache:debian-8-php7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache:debian-9':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache/debian-9'
        - 'docker build --no-cache -t webdevops/php-apache:debian-9 .'
        - 'docker push webdevops/php-apache:debian-9'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache:ubuntu-12.04':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache/ubuntu-12.04'
        - 'docker build --no-cache -t webdevops/php-apache:ubuntu-12.04 .'
        - 'docker push webdevops/php-apache:ubuntu-12.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache:ubuntu-14.04':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache/ubuntu-14.04'
        - 'docker build --no-cache -t webdevops/php-apache:ubuntu-14.04 .'
        - 'docker push webdevops/php-apache:ubuntu-14.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache:ubuntu-15.04':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache/ubuntu-15.04'
        - 'docker build --no-cache -t webdevops/php-apache:ubuntu-15.04 .'
        - 'docker push webdevops/php-apache:ubuntu-15.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache:ubuntu-15.10':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache/ubuntu-15.10'
        - 'docker build --no-cache -t webdevops/php-apache:ubuntu-15.10 .'
        - 'docker push webdevops/php-apache:ubuntu-15.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache:ubuntu-16.04':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache/ubuntu-16.04'
        - 'docker build --no-cache -t webdevops/php-apache:ubuntu-16.04 .'
        - 'docker push webdevops/php-apache:ubuntu-16.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache:ubuntu-16.10':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache/ubuntu-16.10'
        - 'docker build --no-cache -t webdevops/php-apache:ubuntu-16.10 .'
        - 'docker push webdevops/php-apache:ubuntu-16.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache:ubuntu-17.04':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache/ubuntu-17.04'
        - 'docker build --no-cache -t webdevops/php-apache:ubuntu-17.04 .'
        - 'docker push webdevops/php-apache:ubuntu-17.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache:ubuntu-17.10':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache/ubuntu-17.10'
        - 'docker build --no-cache -t webdevops/php-apache:ubuntu-17.10 .'
        - 'docker push webdevops/php-apache:ubuntu-17.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache:ubuntu-18.04':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache/ubuntu-18.04'
        - 'docker build --no-cache -t webdevops/php-apache:ubuntu-18.04 .'
        - 'docker push webdevops/php-apache:ubuntu-18.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-dev:alpine-php5':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-dev/alpine-php5'
        - 'docker build --no-cache -t webdevops/php-dev:alpine-php5 .'
        - 'docker push webdevops/php-dev:alpine-php5'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-dev:alpine-php7':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-dev/alpine-php7'
        - 'docker build --no-cache -t webdevops/php-dev:alpine-php7 .'
        - 'docker push webdevops/php-dev:alpine-php7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-dev:centos-7':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-dev/centos-7'
        - 'docker build --no-cache -t webdevops/php-dev:centos-7 .'
        - 'docker push webdevops/php-dev:centos-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-dev:centos-7-php56':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-dev/centos-7-php56'
        - 'docker build --no-cache -t webdevops/php-dev:centos-7-php56 .'
        - 'docker push webdevops/php-dev:centos-7-php56'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-dev:centos-7-php7':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-dev/centos-7-php7'
        - 'docker build --no-cache -t webdevops/php-dev:centos-7-php7 .'
        - 'docker push webdevops/php-dev:centos-7-php7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-dev:debian-7':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-dev/debian-7'
        - 'docker build --no-cache -t webdevops/php-dev:debian-7 .'
        - 'docker push webdevops/php-dev:debian-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-dev:debian-8':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-dev/debian-8'
        - 'docker build --no-cache -t webdevops/php-dev:debian-8 .'
        - 'docker push webdevops/php-dev:debian-8'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-dev:debian-8-php7':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-dev/debian-8-php7'
        - 'docker build --no-cache -t webdevops/php-dev:debian-8-php7 .'
        - 'docker push webdevops/php-dev:debian-8-php7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-dev:debian-9':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-dev/debian-9'
        - 'docker build --no-cache -t webdevops/php-dev:debian-9 .'
        - 'docker push webdevops/php-dev:debian-9'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-dev:ubuntu-12.04':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-dev/ubuntu-12.04'
        - 'docker build --no-cache -t webdevops/php-dev:ubuntu-12.04 .'
        - 'docker push webdevops/php-dev:ubuntu-12.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-dev:ubuntu-14.04':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-dev/ubuntu-14.04'
        - 'docker build --no-cache -t webdevops/php-dev:ubuntu-14.04 .'
        - 'docker push webdevops/php-dev:ubuntu-14.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-dev:ubuntu-15.04':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-dev/ubuntu-15.04'
        - 'docker build --no-cache -t webdevops/php-dev:ubuntu-15.04 .'
        - 'docker push webdevops/php-dev:ubuntu-15.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-dev:ubuntu-15.10':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-dev/ubuntu-15.10'
        - 'docker build --no-cache -t webdevops/php-dev:ubuntu-15.10 .'
        - 'docker push webdevops/php-dev:ubuntu-15.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-dev:ubuntu-16.04':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-dev/ubuntu-16.04'
        - 'docker build --no-cache -t webdevops/php-dev:ubuntu-16.04 .'
        - 'docker push webdevops/php-dev:ubuntu-16.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-dev:ubuntu-16.10':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-dev/ubuntu-16.10'
        - 'docker build --no-cache -t webdevops/php-dev:ubuntu-16.10 .'
        - 'docker push webdevops/php-dev:ubuntu-16.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-dev:ubuntu-17.04':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-dev/ubuntu-17.04'
        - 'docker build --no-cache -t webdevops/php-dev:ubuntu-17.04 .'
        - 'docker push webdevops/php-dev:ubuntu-17.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-dev:ubuntu-17.10':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-dev/ubuntu-17.10'
        - 'docker build --no-cache -t webdevops/php-dev:ubuntu-17.10 .'
        - 'docker push webdevops/php-dev:ubuntu-17.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-dev:ubuntu-18.04':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-dev/ubuntu-18.04'
        - 'docker build --no-cache -t webdevops/php-dev:ubuntu-18.04 .'
        - 'docker push webdevops/php-dev:ubuntu-18.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx:alpine-php5':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx/alpine-php5'
        - 'docker build --no-cache -t webdevops/php-nginx:alpine-php5 .'
        - 'docker push webdevops/php-nginx:alpine-php5'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx:alpine-php7':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx/alpine-php7'
        - 'docker build --no-cache -t webdevops/php-nginx:alpine-php7 .'
        - 'docker push webdevops/php-nginx:alpine-php7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx:centos-7':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx/centos-7'
        - 'docker build --no-cache -t webdevops/php-nginx:centos-7 .'
        - 'docker push webdevops/php-nginx:centos-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx:centos-7-php56':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx/centos-7-php56'
        - 'docker build --no-cache -t webdevops/php-nginx:centos-7-php56 .'
        - 'docker push webdevops/php-nginx:centos-7-php56'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx:centos-7-php7':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx/centos-7-php7'
        - 'docker build --no-cache -t webdevops/php-nginx:centos-7-php7 .'
        - 'docker push webdevops/php-nginx:centos-7-php7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx:debian-7':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx/debian-7'
        - 'docker build --no-cache -t webdevops/php-nginx:debian-7 .'
        - 'docker push webdevops/php-nginx:debian-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx:debian-8':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx/debian-8'
        - 'docker build --no-cache -t webdevops/php-nginx:debian-8 .'
        - 'docker push webdevops/php-nginx:debian-8'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx:debian-8-php7':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx/debian-8-php7'
        - 'docker build --no-cache -t webdevops/php-nginx:debian-8-php7 .'
        - 'docker push webdevops/php-nginx:debian-8-php7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx:debian-9':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx/debian-9'
        - 'docker build --no-cache -t webdevops/php-nginx:debian-9 .'
        - 'docker push webdevops/php-nginx:debian-9'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx:ubuntu-12.04':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx/ubuntu-12.04'
        - 'docker build --no-cache -t webdevops/php-nginx:ubuntu-12.04 .'
        - 'docker push webdevops/php-nginx:ubuntu-12.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx:ubuntu-14.04':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx/ubuntu-14.04'
        - 'docker build --no-cache -t webdevops/php-nginx:ubuntu-14.04 .'
        - 'docker push webdevops/php-nginx:ubuntu-14.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx:ubuntu-15.04':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx/ubuntu-15.04'
        - 'docker build --no-cache -t webdevops/php-nginx:ubuntu-15.04 .'
        - 'docker push webdevops/php-nginx:ubuntu-15.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx:ubuntu-15.10':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx/ubuntu-15.10'
        - 'docker build --no-cache -t webdevops/php-nginx:ubuntu-15.10 .'
        - 'docker push webdevops/php-nginx:ubuntu-15.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx:ubuntu-16.04':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx/ubuntu-16.04'
        - 'docker build --no-cache -t webdevops/php-nginx:ubuntu-16.04 .'
        - 'docker push webdevops/php-nginx:ubuntu-16.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx:ubuntu-16.10':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx/ubuntu-16.10'
        - 'docker build --no-cache -t webdevops/php-nginx:ubuntu-16.10 .'
        - 'docker push webdevops/php-nginx:ubuntu-16.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx:ubuntu-17.04':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx/ubuntu-17.04'
        - 'docker build --no-cache -t webdevops/php-nginx:ubuntu-17.04 .'
        - 'docker push webdevops/php-nginx:ubuntu-17.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx:ubuntu-17.10':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx/ubuntu-17.10'
        - 'docker build --no-cache -t webdevops/php-nginx:ubuntu-17.10 .'
        - 'docker push webdevops/php-nginx:ubuntu-17.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx:ubuntu-18.04':
    stage: level4
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx/ubuntu-18.04'
        - 'docker build --no-cache -t webdevops/php-nginx:ubuntu-18.04 .'
        - 'docker push webdevops/php-nginx:ubuntu-18.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'mail-sandbox:latest':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/mail-sandbox/latest'
        - 'docker build --no-cache -t webdevops/mail-sandbox:latest .'
        - 'docker push webdevops/mail-sandbox:latest'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache-dev:alpine-php5':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache-dev/alpine-php5'
        - 'docker build --no-cache -t webdevops/php-apache-dev:alpine-php5 .'
        - 'docker push webdevops/php-apache-dev:alpine-php5'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache-dev:alpine-php7':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache-dev/alpine-php7'
        - 'docker build --no-cache -t webdevops/php-apache-dev:alpine-php7 .'
        - 'docker push webdevops/php-apache-dev:alpine-php7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache-dev:centos-7':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache-dev/centos-7'
        - 'docker build --no-cache -t webdevops/php-apache-dev:centos-7 .'
        - 'docker push webdevops/php-apache-dev:centos-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache-dev:centos-7-php56':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache-dev/centos-7-php56'
        - 'docker build --no-cache -t webdevops/php-apache-dev:centos-7-php56 .'
        - 'docker push webdevops/php-apache-dev:centos-7-php56'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache-dev:centos-7-php7':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache-dev/centos-7-php7'
        - 'docker build --no-cache -t webdevops/php-apache-dev:centos-7-php7 .'
        - 'docker push webdevops/php-apache-dev:centos-7-php7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache-dev:debian-7':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache-dev/debian-7'
        - 'docker build --no-cache -t webdevops/php-apache-dev:debian-7 .'
        - 'docker push webdevops/php-apache-dev:debian-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache-dev:debian-8':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache-dev/debian-8'
        - 'docker build --no-cache -t webdevops/php-apache-dev:debian-8 .'
        - 'docker push webdevops/php-apache-dev:debian-8'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache-dev:debian-8-php7':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache-dev/debian-8-php7'
        - 'docker build --no-cache -t webdevops/php-apache-dev:debian-8-php7 .'
        - 'docker push webdevops/php-apache-dev:debian-8-php7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache-dev:debian-9':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache-dev/debian-9'
        - 'docker build --no-cache -t webdevops/php-apache-dev:debian-9 .'
        - 'docker push webdevops/php-apache-dev:debian-9'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache-dev:ubuntu-12.04':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache-dev/ubuntu-12.04'
        - 'docker build --no-cache -t webdevops/php-apache-dev:ubuntu-12.04 .'
        - 'docker push webdevops/php-apache-dev:ubuntu-12.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache-dev:ubuntu-14.04':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache-dev/ubuntu-14.04'
        - 'docker build --no-cache -t webdevops/php-apache-dev:ubuntu-14.04 .'
        - 'docker push webdevops/php-apache-dev:ubuntu-14.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache-dev:ubuntu-15.04':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache-dev/ubuntu-15.04'
        - 'docker build --no-cache -t webdevops/php-apache-dev:ubuntu-15.04 .'
        - 'docker push webdevops/php-apache-dev:ubuntu-15.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache-dev:ubuntu-15.10':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache-dev/ubuntu-15.10'
        - 'docker build --no-cache -t webdevops/php-apache-dev:ubuntu-15.10 .'
        - 'docker push webdevops/php-apache-dev:ubuntu-15.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache-dev:ubuntu-16.04':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache-dev/ubuntu-16.04'
        - 'docker build --no-cache -t webdevops/php-apache-dev:ubuntu-16.04 .'
        - 'docker push webdevops/php-apache-dev:ubuntu-16.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache-dev:ubuntu-16.10':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache-dev/ubuntu-16.10'
        - 'docker build --no-cache -t webdevops/php-apache-dev:ubuntu-16.10 .'
        - 'docker push webdevops/php-apache-dev:ubuntu-16.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache-dev:ubuntu-17.04':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache-dev/ubuntu-17.04'
        - 'docker build --no-cache -t webdevops/php-apache-dev:ubuntu-17.04 .'
        - 'docker push webdevops/php-apache-dev:ubuntu-17.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache-dev:ubuntu-17.10':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache-dev/ubuntu-17.10'
        - 'docker build --no-cache -t webdevops/php-apache-dev:ubuntu-17.10 .'
        - 'docker push webdevops/php-apache-dev:ubuntu-17.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-apache-dev:ubuntu-18.04':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-apache-dev/ubuntu-18.04'
        - 'docker build --no-cache -t webdevops/php-apache-dev:ubuntu-18.04 .'
        - 'docker push webdevops/php-apache-dev:ubuntu-18.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx-dev:alpine-php5':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx-dev/alpine-php5'
        - 'docker build --no-cache -t webdevops/php-nginx-dev:alpine-php5 .'
        - 'docker push webdevops/php-nginx-dev:alpine-php5'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx-dev:alpine-php7':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx-dev/alpine-php7'
        - 'docker build --no-cache -t webdevops/php-nginx-dev:alpine-php7 .'
        - 'docker push webdevops/php-nginx-dev:alpine-php7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx-dev:centos-7':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx-dev/centos-7'
        - 'docker build --no-cache -t webdevops/php-nginx-dev:centos-7 .'
        - 'docker push webdevops/php-nginx-dev:centos-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx-dev:centos-7-php56':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx-dev/centos-7-php56'
        - 'docker build --no-cache -t webdevops/php-nginx-dev:centos-7-php56 .'
        - 'docker push webdevops/php-nginx-dev:centos-7-php56'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx-dev:centos-7-php7':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx-dev/centos-7-php7'
        - 'docker build --no-cache -t webdevops/php-nginx-dev:centos-7-php7 .'
        - 'docker push webdevops/php-nginx-dev:centos-7-php7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx-dev:debian-7':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx-dev/debian-7'
        - 'docker build --no-cache -t webdevops/php-nginx-dev:debian-7 .'
        - 'docker push webdevops/php-nginx-dev:debian-7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx-dev:debian-8':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx-dev/debian-8'
        - 'docker build --no-cache -t webdevops/php-nginx-dev:debian-8 .'
        - 'docker push webdevops/php-nginx-dev:debian-8'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx-dev:debian-8-php7':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx-dev/debian-8-php7'
        - 'docker build --no-cache -t webdevops/php-nginx-dev:debian-8-php7 .'
        - 'docker push webdevops/php-nginx-dev:debian-8-php7'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx-dev:debian-9':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx-dev/debian-9'
        - 'docker build --no-cache -t webdevops/php-nginx-dev:debian-9 .'
        - 'docker push webdevops/php-nginx-dev:debian-9'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx-dev:ubuntu-12.04':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx-dev/ubuntu-12.04'
        - 'docker build --no-cache -t webdevops/php-nginx-dev:ubuntu-12.04 .'
        - 'docker push webdevops/php-nginx-dev:ubuntu-12.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx-dev:ubuntu-14.04':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx-dev/ubuntu-14.04'
        - 'docker build --no-cache -t webdevops/php-nginx-dev:ubuntu-14.04 .'
        - 'docker push webdevops/php-nginx-dev:ubuntu-14.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx-dev:ubuntu-15.04':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx-dev/ubuntu-15.04'
        - 'docker build --no-cache -t webdevops/php-nginx-dev:ubuntu-15.04 .'
        - 'docker push webdevops/php-nginx-dev:ubuntu-15.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx-dev:ubuntu-15.10':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx-dev/ubuntu-15.10'
        - 'docker build --no-cache -t webdevops/php-nginx-dev:ubuntu-15.10 .'
        - 'docker push webdevops/php-nginx-dev:ubuntu-15.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx-dev:ubuntu-16.04':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx-dev/ubuntu-16.04'
        - 'docker build --no-cache -t webdevops/php-nginx-dev:ubuntu-16.04 .'
        - 'docker push webdevops/php-nginx-dev:ubuntu-16.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx-dev:ubuntu-16.10':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx-dev/ubuntu-16.10'
        - 'docker build --no-cache -t webdevops/php-nginx-dev:ubuntu-16.10 .'
        - 'docker push webdevops/php-nginx-dev:ubuntu-16.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx-dev:ubuntu-17.04':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx-dev/ubuntu-17.04'
        - 'docker build --no-cache -t webdevops/php-nginx-dev:ubuntu-17.04 .'
        - 'docker push webdevops/php-nginx-dev:ubuntu-17.04'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx-dev:ubuntu-17.10':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx-dev/ubuntu-17.10'
        - 'docker build --no-cache -t webdevops/php-nginx-dev:ubuntu-17.10 .'
        - 'docker push webdevops/php-nginx-dev:ubuntu-17.10'
    retry: 2
    tags:
        - aws
    only:
        - master
'php-nginx-dev:ubuntu-18.04':
    stage: level5
    before_script:
        - 'docker login -u $DOCKER_USER -p $DOCKER_PASS'
    script:
        - 'cd docker/php-nginx-dev/ubuntu-18.04'
        - 'docker build --no-cache -t webdevops/php-nginx-dev:ubuntu-18.04 .'
        - 'docker push webdevops/php-nginx-dev:ubuntu-18.04'
    retry: 2
    tags:
        - aws
    only:
        - master
